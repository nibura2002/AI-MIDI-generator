<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>AI MIDI Generator (Flask)</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans&display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <div class="container">
    <div class="sidebar">
      <h2>Song Details</h2>
      <form method="POST">
          <label>Genre:</label>
          <select name="genre">
              {% for g in genre_options %}
                  <option value="{{ g }}" {% if g == default_genre %}selected{% endif %}>{{ g }}</option>
              {% endfor %}
          </select>
          <label>Tempo (BPM):</label>
          <input type="number" name="tempo" min="50" max="300" value="{{ default_tempo }}">
          <label>Key:</label>
          <select name="key_center">
              {% for note in ["C", "D", "E", "F", "G", "A", "B"] %}
                  <option value="{{ note }}" {% if note == default_key %}selected{% endif %}>{{ note }}</option>
              {% endfor %}
          </select>
          <label>Scale Type:</label>
          <select name="scale_type">
              {% for st in ["major", "minor"] %}
                  <option value="{{ st }}" {% if st == default_scale_type %}selected{% endif %}>{{ st }}</option>
              {% endfor %}
          </select>
          <label>Mood:</label>
          <input type="text" name="mood" value="{{ default_mood }}">
          <label>Parts Information:</label>
          <textarea name="parts_info" rows="3">{{ default_parts_info }}</textarea>
          <label>Additional Details:</label>
          <textarea name="additional_details" rows="3">{{ default_additional_details }}</textarea>
          <label>Number of Measures:</label>
          <input type="number" name="measure_count" min="1" max="100" value="{{ default_measure_count }}">
          <label>Main Beat Subdivision:</label>
          <select name="beat_subdivision">
              {% for subdiv in ["1/4", "1/8", "1/16", "3/4", "6/8"] %}
                  <option value="{{ subdiv }}" {% if subdiv == default_beat_subdivision %}selected{% endif %}>{{ subdiv }}</option>
              {% endfor %}
          </select>
          <button type="submit">Generate & Execute MIDI Code</button>
      </form>
      <div class="flash-messages">
          {% with messages = get_flashed_messages(with_categories=true) %}
              {% if messages %}
                  <ul>
                      {% for category, msg in messages %}
                          <li><strong>{{ category }}:</strong> {{ msg }}</li>
                      {% endfor %}
                  </ul>
              {% endif %}
          {% endwith %}
      </div>
    </div>
    <div class="main-content">
      <h1>AI MIDI Generator</h1>
      <p>This application generates a MIDI file based on your song description.<br>
         Use the sidebar on the left to specify the details and generate your MIDI file.</p>
    </div>
  </div>
</body>
</html>